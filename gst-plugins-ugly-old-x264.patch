From 2339add6d5ca87aaeb7ca612f1b2326a8819d26e Mon Sep 17 00:00:00 2001
From: Olivier CrÃªte <olivier.crete@collabora.co.uk>
Date: Mon, 31 May 2010 20:57:42 +0000
Subject: x264enc: Only set i_weighted_pred on versions where it exists

---
diff --git a/ext/x264/gstx264enc.c b/ext/x264/gstx264enc.c
index c3c64a5..b717d01 100644
--- a/ext/x264/gstx264enc.c
+++ b/ext/x264/gstx264enc.c
@@ -594,7 +594,9 @@ gst_x264_enc_init_encoder (GstX264Enc * encoder)
   encoder->x264param.analyse.inter = encoder->analyse;
   encoder->x264param.analyse.b_transform_8x8 = encoder->dct8x8;
   encoder->x264param.analyse.b_weighted_bipred = encoder->weightb;
+#if X264_BUILD > 78
   encoder->x264param.analyse.i_weighted_pred = 0;
+#endif
   encoder->x264param.analyse.i_noise_reduction = encoder->noise_reduction;
   encoder->x264param.i_frame_reference = encoder->ref;
   encoder->x264param.i_bframe = encoder->bframes;
--
cgit v0.8.3-6-g21f6
